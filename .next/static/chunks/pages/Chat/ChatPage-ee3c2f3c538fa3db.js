(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245],{9926:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Chat/ChatPage",function(){return s(2485)}])},2717:function(e,t){"use strict";t.Z={src:"/_next/static/media/AIProfile.ff1ea54b.svg",height:36,width:36,blurWidth:0,blurHeight:0}},2485:function(e,t,s){"use strict";s.r(t);var r=s(2676),i=s(5271),n=s(2589),a=s(3592),c=s(4883),l=s(4764),d=s(850);t.default=()=>{let[e,t]=(0,i.useState)(!1),[s,o]=(0,i.useState)(null),[u,h]=(0,i.useState)(null),[m,x]=(0,i.useState)(null),f=(0,i.useRef)(null),b=(0,i.useRef)([]),convertSpeechToText=async e=>{let t=new FormData;t.append("file",e,"voiceMessage.webm");try{let e=await fetch("/api/speech-to-text",{method:"POST",body:t});if(!e.ok)throw Error("음성 변환 실패");let s=await e.json();return s.text||""}catch(e){return console.error("음성 변환 에러:",e),""}},startRecording=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),s=new MediaRecorder(e);f.current=s,b.current=[],s.ondataavailable=e=>{b.current.push(e.data)},s.onstop=async()=>{let e=new Blob(b.current,{type:"audio/webm"});o(e);let t=await convertSpeechToText(e);h(t);let s=URL.createObjectURL(e);x(s)},s.start(),t(!0)}catch(e){console.error("마이크 접근 실패:",e)}},stopRecording=()=>{var e;null===(e=f.current)||void 0===e||e.stop(),t(!1)};return(0,r.jsxs)("div",{className:"flex flex-col w-full h-screen bg-[#F5F8FF] py-6 px-[1rem]",children:[(0,r.jsx)(l.default,{}),(0,r.jsx)(n.default,{}),u&&(0,r.jsx)(d.default,{text:u,audioUrl:m||void 0}),m&&(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsx)("audio",{controls:!0,src:m})}),(0,r.jsx)("div",{className:"text-center mt-auto",children:e?(0,r.jsx)(c.default,{onStopClick:()=>{stopRecording()},onSendClick:()=>{stopRecording()}}):(0,r.jsx)("button",{onClick:()=>{startRecording()},children:(0,r.jsx)(a.default,{})})})]})}},3592:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _components_MicOff}});var r=s(2676),i={src:"/_next/static/media/Mic.0e752564.svg",height:82,width:82,blurWidth:0,blurHeight:0},n={src:"/_next/static/media/MicBubble.9d218cc6.svg",height:46,width:179,blurWidth:0,blurHeight:0},_components_MicOff=()=>(0,r.jsxs)("div",{className:"text-center mt-auto",children:[(0,r.jsx)("p",{className:"text-sm text-[#1D4ED8] font-semibold mb-1 animate-bounce",children:(0,r.jsx)(n,{})}),(0,r.jsx)("button",{children:(0,r.jsx)(i,{className:"w-[4rem] h-[4rem] transition-opacity duration-300 "})})]})},4883:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _components_MicOn}});var r=s(2676),i={src:"/_next/static/media/MicStop.99227c92.svg",height:58,width:58,blurWidth:0,blurHeight:0},n={src:"/_next/static/media/MicSend.e807b13d.svg",height:58,width:58,blurWidth:0,blurHeight:0},_components_MicOn=e=>{let{onStopClick:t,onSendClick:s}=e;return(0,r.jsxs)("div",{className:"flex justify-center items-center mt-3",children:[(0,r.jsx)("button",{onClick:t,children:(0,r.jsx)(i,{className:"w-[3.625rem] h-[3.625rem] mr-4"})}),(0,r.jsx)("div",{className:"flex items-center justify-center space-x-4 bg-[#1A75FF] rounded-full w-full h-[3.625rem] mr-1 relative overflow-hidden",children:[0,1,2].map(e=>(0,r.jsx)("span",{className:"w-2.5 h-2.5 bg-white rounded-full animate-mic-dot animation-delay-".concat(e)},e))}),(0,r.jsx)("button",{onClick:s,children:(0,r.jsx)(n,{className:"w-[4.25rem] h-[4.25rem]"})})]})}},2589:function(e,t,s){"use strict";s.r(t);var r=s(2676),i=s(2717);t.default=()=>(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"w-full flex items-start mb-4",children:[(0,r.jsx)("div",{className:"mr-2",children:(0,r.jsx)(i.Z,{className:"w-8 h-8"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"flex items-start mb-1",children:(0,r.jsx)("span",{className:"font-medium text-sm",children:"토디"})}),(0,r.jsxs)("div",{className:"bg-white w-[17.625rem] p-3 rounded-lg rounded-tl-none border border-[#ECEEF0]",children:[(0,r.jsxs)("div",{className:"text-[1rem] whitespace-pre-line",children:["안녕하세요, 저는 OO님의 언어학습을 도와줄 토디입니다.","\n","지금부터 나오는 그림을 보고 발음해보세요."]}),(0,r.jsx)("div",{className:"w-[250px] h-[250px] mt-3 border-2 border-dashed border-gray-300 rounded-lg flex justify-center items-center bg-white overflow-hidden",children:(0,r.jsx)("span",{className:"text-gray-400",children:"[그림 삽입 영역]"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,r.jsx)("button",{className:"bg-[#EAF2FE] text-[#005EEB] text-[0.75rem] px-1.5 py-0.5 rounded-md",children:"힌트"}),(0,r.jsx)("div",{className:"text-[#005EEB] text-[0.75rem]",children:"그림을 선택하면 소리가 재생돼요."})]})]})]})})},4764:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Topbar}});var r=s(2676),i=s(9019),n={src:"/_next/static/media/Close.2e3525f6.svg",height:32,width:32,blurWidth:0,blurHeight:0},Topbar=()=>{let e=(0,i.s0)();return(0,r.jsx)("div",{className:"w-full h-[3.25rem] flex justify-end items-center",children:(0,r.jsx)("button",{onClick:()=>{e("/home")},"aria-label":"Close",children:(0,r.jsx)(n,{})})})}},850:function(e,t,s){"use strict";s.r(t);var r=s(2676),i=s(5271);t.default=e=>{let{text:t,audioUrl:s}=e,n=i.useRef(null);return(0,r.jsxs)("div",{className:"max-w-[70%] bg-blue-500 text-white p-3 rounded-lg mb-2 self-end",children:[(0,r.jsx)("p",{children:t}),s&&(0,r.jsx)("button",{onClick:()=>{var e;null===(e=n.current)||void 0===e||e.play()},className:"mt-2 bg-blue-700 px-3 py-1 rounded text-sm",children:"듣기 ▶"}),s&&(0,r.jsx)("audio",{ref:n,src:s})]})}}},function(e){e.O(0,[774,246,888,179],function(){return e(e.s=9926)}),_N_E=e.O()}]);